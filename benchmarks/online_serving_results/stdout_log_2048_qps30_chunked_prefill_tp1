INFO 07-08 04:22:03 [__init__.py:239] Automatically detected platform rocm.
Namespace(backend='openai-chat', base_url=None, host='localhost', port=8080, endpoint='/v1/chat/completions', dataset_name='random', dataset_path=None, max_concurrency=None, model='/workspace/llama_3.1_70B', tokenizer=None, use_beam_search=False, num_prompts=1024, logprobs=None, request_rate=30.0, burstiness=1.0, seed=0, trust_remote_code=False, disable_tqdm=False, profile=False, save_result=True, save_detailed=False, metadata=None, result_dir='./results', result_filename='chunked_prefill-qps-30-input-len-2048-tp-8.json', ignore_eos=False, percentile_metrics='ttft,tpot,itl', metric_percentiles='99', goodput=None, sonnet_input_len=550, sonnet_output_len=150, sonnet_prefix_len=200, sharegpt_output_len=None, random_input_len=2048, random_output_len=256, random_range_ratio=1.0, random_prefix_len=0, hf_subset=None, hf_split=None, hf_output_len=None, tokenizer_mode='auto', served_model_name=None, lora_modules=None)
Starting initial single prompt test run...
=== DEBUG: Entering benchmark() ===
DEBUG: backend         = openai-chat
DEBUG: api_url         = 'http://localhost:8080/v1/chat/completions'
DEBUG: model_id        = '/workspace/llama_3.1_70B'
DEBUG: model_name      = None
DEBUG: request_func    = async_request_openai_chat_completions
Starting initial single prompt test run...
test_output RequestFuncOutput(generated_text='It appears that you\'ve provided a large amount of text that seems to be a mix of programming code, technical terms, and random words. I\'ll do my best to help you make sense of it.\n\n**Code Analysis**\n\nThe text appears to contain snippets of code in various programming languages, including:\n\n1. Java: I see Java-like syntax and keywords, such as `public class`, `extends`, `implements`, and `@Override`.\n2. Python: There are Python-like syntax and keywords, such as `def`, `class`, and `import`.\n3. C++: I see C++-like syntax and keywords, such as `#include`, `class`, and `template`.\n4. JavaScript: There are JavaScript-like syntax and keywords, such as `function`, `var`, and `console.log`.\n\n**Technical Terms**\n\nThe text contains various technical terms, including:\n\n1. Programming concepts: I see terms like "inheritance", "polymorphism", "encapsulation", and "abstraction".\n2. Data structures: There are mentions of data structures like "arrays", "lists", "stacks", and "queues".\n3. Algorithms: I see references to algorithms like "sorting", "searching", and "graph traversal".\n4.', success=True, latency=4.2342906151898205, output_tokens=256, ttft=0.29828860703855753, itl=[0.0030510840006172657, 0.014865847770124674, 0.014704789966344833, 0.014749179128557444, 0.014740284997969866, 0.014746042899787426, 0.014720296952873468, 0.014728574082255363, 0.014764945954084396, 0.014754910953342915, 0.014767516404390335, 0.014757854864001274, 0.014763610903173685, 0.014849827159196138, 0.014752611983567476, 0.01484972471371293, 0.014772971160709858, 0.014817566145211458, 0.014804516918957233, 0.014781374018639326, 0.014806193765252829, 0.014923733193427324, 0.014681445900350809, 0.014899726025760174, 0.014825566206127405, 0.014889753889292479, 0.014827290084213018, 0.014854548964649439, 0.01483751880005002, 0.014824225101619959, 0.014831635169684887, 0.014839347917586565, 0.014873309060931206, 0.014834509696811438, 0.014844533056020737, 0.014956627041101456, 0.014866238925606012, 0.014846164267510176, 0.014855157118290663, 0.014889393001794815, 0.014821951743215322, 0.01491949800401926, 0.014914894942194223, 0.014848819002509117, 0.014869771897792816, 0.014861496165394783, 0.014864807017147541, 0.014857891015708447, 0.015105214901268482, 0.014823328237980604, 0.014844937715679407, 0.01487718801945448, 0.014926722273230553, 0.014918654691427946, 0.014825866091996431, 0.014866737183183432, 0.014883236959576607, 0.014921115711331367, 0.014935268089175224, 0.014900804962962866, 0.014915894251316786, 0.014813137706369162, 0.014960701111704111, 0.014896709006279707, 0.014930797275155783, 0.014939249958842993, 0.014924651011824608, 0.014874279964715242, 0.014874659944325686, 0.01496590906754136, 0.014854114968329668, 0.01492525776848197, 0.014835245907306671, 0.014864228200167418, 0.014944862108677626, 0.014868057798594236, 0.014935794286429882, 0.015013451687991619, 0.0149155892431736, 0.014875974971801043, 0.014901553746312857, 0.014900010079145432, 0.01493728393688798, 0.014907317236065865, 0.014914936851710081, 0.01492248009890318, 0.014882206916809082, 0.014918726868927479, 0.014908617362380028, 0.014937419909983873, 0.014911159873008728, 0.014905223157256842, 0.014959456864744425, 0.01496117515489459, 0.014864119701087475, 0.01521961810067296, 0.014658635016530752, 0.014906996861100197, 0.01498981798067689, 0.014910683035850525, 0.01493063336238265, 0.014925690833479166, 0.014966770075261593, 0.014893453102558851, 0.014983142726123333, 0.014931668993085623, 0.014903377275913954, 0.014866094570606947, 0.01494283601641655, 0.014965313021093607, 0.014884465374052525, 0.014948957599699497, 0.014921799302101135, 0.014955948106944561, 0.015009353868663311, 0.014859551098197699, 0.01498681167140603, 0.01498803636059165, 0.01493203267455101, 0.014948908239603043, 0.014920314773917198, 0.014938501175493002, 0.015022650826722383, 0.014898621011525393, 0.015009918250143528, 0.014946640003472567, 0.015761098824441433, 0.015138677787035704, 0.014955141115933657, 0.014960390981286764, 0.014966577291488647, 0.019264375790953636, 0.018964263144880533, 0.016585747711360455, 0.015019675251096487, 0.01790614891797304, 0.018443158827722073, 0.01982105616480112, 0.018342650961130857, 0.01686101220548153, 0.020587192848324776, 0.02847630111500621, 0.0193651020526886, 0.0213982998393476, 0.01862503681331873, 0.019761139061301947, 0.018249826040118933, 0.019528027158230543, 0.018232831731438637, 0.018001776188611984, 0.01862468011677265, 0.016164361033588648, 0.020060169976204634, 0.020251478999853134, 0.016794074792414904, 0.019742887932807207, 0.019071596208959818, 0.020737512037158012, 0.0200597089715302, 0.022018828894943, 0.018642024137079716, 0.0151818310841918, 0.01492161862552166, 0.01498341141268611, 0.014976861886680126, 0.014919432811439037, 0.014894669875502586, 0.014971119351685047, 0.014938292093575, 0.014869394712150097, 0.0149501021951437, 0.014938835985958576, 0.014921640045940876, 0.014873041771352291, 0.014990412164479494, 0.015007659792900085, 0.01494183810427785, 0.014943233225494623, 0.014914382714778185, 0.014921042136847973, 0.0149729298427701, 0.014982430264353752, 0.01493453560397029, 0.014935994055122137, 0.01492800796404481, 0.014925788156688213, 0.0154424412176013, 0.015049765817821026, 0.014770808164030313, 0.014929845929145813, 0.015035087708383799, 0.014898984227329493, 0.014923484064638615, 0.014939495828002691, 0.015014590229839087, 0.01491985097527504, 0.01491359993815422, 0.014962363056838512, 0.014919437933713198, 0.014954061713069677, 0.014903211034834385, 0.01499492907896638, 0.014957742299884558, 0.014915947802364826, 0.014966406859457493, 0.01493061427026987, 0.014897898770868778, 0.014906907919794321, 0.014930873177945614, 0.01499795401468873, 0.014916618820279837, 0.015057687181979418, 0.014898090157657862, 0.01495348196476698, 0.014990841038525105, 0.014936306048184633, 0.014925644733011723, 0.014964962843805552, 0.01496028108522296, 0.014918209053575993, 0.014874916058033705, 0.015004918910562992, 0.014914670959115028, 0.014975321944803, 0.014957510400563478, 0.014915674924850464, 0.014882162678986788, 0.014934433158487082, 0.01498453225940466, 0.014945803675800562, 0.014913215301930904, 0.014963951893150806, 0.015022261068224907, 0.014920145738869905, 0.015065419021993876, 0.014951026998460293, 0.014881451148539782, 0.014904837124049664, 0.014990414958447218, 0.015089239925146103, 0.014848134946078062, 0.014928022865206003, 0.01495391596108675, 0.014970907010138035, 0.01503288233652711, 0.014950343873351812, 0.014909455087035894, 0.01493693282827735, 0.015010097995400429, 0.014908310025930405, 0.014982289168983698, 0.014938005711883307, 0.014963044319301844, 0.01494895899668336, 0.014945890754461288, 0.015386521816253662], tpot=0.0, prompt_len=2048, error='')
Initial test run completed. Starting main benchmark run...
Traffic request rate: 30.0
Burstiness factor: 1.0 (Poisson process)
Maximum request concurrency: None
============ Serving Benchmark Result ============
Successful requests:                     1024      
Benchmark duration (s):                  157.39    
Total input tokens:                      2097152   
Total generated tokens:                  229453    
Request throughput (req/s):              6.51      
Output token throughput (tok/s):         1457.83   
Total Token throughput (tok/s):          14782.13  
---------------Time to First Token----------------
Mean TTFT (ms):                          54483.95  
Median TTFT (ms):                        53978.61  
P99 TTFT (ms):                           110452.47 
-----Time per Output Token (excl. 1st token)------
Mean TPOT (ms):                          214.54    
Median TPOT (ms):                        251.70    
P99 TPOT (ms):                           267.19    
---------------Inter-token Latency----------------
Mean ITL (ms):                           209.48    
Median ITL (ms):                         243.60    
P99 ITL (ms):                            291.56    
==================================================
