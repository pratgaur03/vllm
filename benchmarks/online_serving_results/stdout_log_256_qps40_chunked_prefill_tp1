INFO 07-08 03:09:19 [__init__.py:239] Automatically detected platform rocm.
Namespace(backend='openai-chat', base_url=None, host='localhost', port=8080, endpoint='/v1/chat/completions', dataset_name='random', dataset_path=None, max_concurrency=None, model='/workspace/llama_3.1_70B', tokenizer=None, use_beam_search=False, num_prompts=1024, logprobs=None, request_rate=40.0, burstiness=1.0, seed=0, trust_remote_code=False, disable_tqdm=False, profile=False, save_result=True, save_detailed=False, metadata=None, result_dir='./results', result_filename='chunked_prefill-qps-40-input-len-256-tp-8.json', ignore_eos=False, percentile_metrics='ttft,tpot,itl', metric_percentiles='99', goodput=None, sonnet_input_len=550, sonnet_output_len=150, sonnet_prefix_len=200, sharegpt_output_len=None, random_input_len=256, random_output_len=256, random_range_ratio=1.0, random_prefix_len=0, hf_subset=None, hf_split=None, hf_output_len=None, tokenizer_mode='auto', served_model_name=None, lora_modules=None)
Starting initial single prompt test run...
=== DEBUG: Entering benchmark() ===
DEBUG: backend         = openai-chat
DEBUG: api_url         = 'http://localhost:8080/v1/chat/completions'
DEBUG: model_id        = '/workspace/llama_3.1_70B'
DEBUG: model_name      = None
DEBUG: request_func    = async_request_openai_chat_completions
Starting initial single prompt test run...
test_output RequestFuncOutput(generated_text="It appears that you've provided a large block of text that seems to be a jumbled collection of words, phrases, and code snippets from various programming languages and domains. I'll try to break it down and provide some insights:\n\n**Programming languages and frameworks:**\n\n* Java (e.g., `@NoArgsConstructor`, `Parcelable`)\n* Python (e.g., `pd`, `testProfit`)\n* JavaScript (e.g., `OnClickListener`, `Component`)\n* C# (e.g., `Cleanup.structure`)\n* Kotlin (e.g., `lateinit`)\n\n**Domains and topics:**\n\n* Android development (e.g., `OnClickListener`, `Parcelable`)\n* Data science and machine learning (e.g., `testProfit`, `estimator`)\n* Web development (e.g., `Component`, `Cleanup.structure`)\n* IoT and sensor-related topics (e.g., `SENSOR_BUSY`, `wifi`)\n* Finance and economics (e.g., `NYSE`, `profit`)\n* Geography and location-based services (e.g., `Latitude`, `Prague`)\n\n**Other observations:**\n\n* There are many typos and non-English words/phrases, which might indicate that the text is a result of a machine translation or a text generation algorithm.\n* Some parts of the", success=True, latency=3.8425119589082897, output_tokens=256, ttft=0.0971520789898932, itl=[4.7073233872652054e-05, 0.01497550681233406, 0.014879296999424696, 0.014696007128804922, 0.014633324928581715, 0.014914136845618486, 0.0149390222504735, 0.014656493905931711, 0.015022199135273695, 0.014887159690260887, 0.014855450950562954, 0.014957990031689405, 0.014970557298511267, 0.014669263735413551, 0.014644394163042307, 0.014936034101992846, 0.014916867949068546, 0.014692309778183699, 0.014730060938745737, 0.014637566171586514, 0.014582554809749126, 0.014639800414443016, 0.014687372837215662, 0.014648478012531996, 0.014596138149499893, 0.014611375983804464, 0.014657920692116022, 0.014612826984375715, 0.014659964945167303, 0.014645340386778116, 0.014624616596847773, 0.01458682119846344, 0.014707649126648903, 0.014628089033067226, 0.014613776933401823, 0.014620855916291475, 0.01463243318721652, 0.014595353044569492, 0.014625307638198137, 0.014601967297494411, 0.01465494791045785, 0.014682841021567583, 0.01459688413888216, 0.01462764572352171, 0.014680851250886917, 0.014599550981074572, 0.014672326855361462, 0.01470206119120121, 0.014618649613112211, 0.014711061958223581, 0.014621563255786896, 0.0146369319409132, 0.0146487089805305, 0.01480022119358182, 0.01462438702583313, 0.014680461958050728, 0.014715812634676695, 0.014599211048334837, 0.01469073724001646, 0.01461658114567399, 0.014712102711200714, 0.014631693251430988, 0.014693996869027615, 0.014700864907354116, 0.01473035616800189, 0.014707467053085566, 0.014699135906994343, 0.01466442784294486, 0.014707983005791903, 0.014628049917519093, 0.014607447199523449, 0.014662296045571566, 0.014616380911320448, 0.014662977773696184, 0.01474284427240491, 0.014672049786895514, 0.014705096371471882, 0.01470237784087658, 0.014655150938779116, 0.01459959289059043, 0.01467870594933629, 0.014675739221274853, 0.014691289979964495, 0.01470417995005846, 0.014629386831074953, 0.014623897150158882, 0.014643101952970028, 0.014664006885141134, 0.014611650258302689, 0.014729547780007124, 0.01468680426478386, 0.01466389698907733, 0.014729124959558249, 0.014647344127297401, 0.014718960970640182, 0.014693466946482658, 0.014652288053184748, 0.014655105769634247, 0.01462202426046133, 0.014727727975696325, 0.014683628920465708, 0.01471357000991702, 0.014690685085952282, 0.014672149904072285, 0.014728454872965813, 0.014679138083010912, 0.01461111893877387, 0.014690104871988297, 0.01469573937356472, 0.014654961880296469, 0.014727253932505846, 0.014646296855062246, 0.014625432901084423, 0.014663935173302889, 0.014658078085631132, 0.014632701873779297, 0.014595482032746077, 0.014639989007264376, 0.014642416965216398, 0.014638589229434729, 0.014577432069927454, 0.014706146903336048, 0.014684621710330248, 0.014641053043305874, 0.014683051034808159, 0.014679366257041693, 0.014649947639554739, 0.014646259136497974, 0.014724316075444221, 0.014618963934481144, 0.01470151823014021, 0.01470110984519124, 0.014628824777901173, 0.014617647975683212, 0.014679805375635624, 0.01470552384853363, 0.014627269003540277, 0.014668018091470003, 0.014698252081871033, 0.01461787661537528, 0.014669948257505894, 0.014683403074741364, 0.014796302653849125, 0.014662206172943115, 0.014624548144638538, 0.014683113899081945, 0.014702750835567713, 0.014603354036808014, 0.014716066885739565, 0.014703379012644291, 0.014672357123345137, 0.014656842220574617, 0.014701868873089552, 0.014661550987511873, 0.01460255216807127, 0.014757311902940273, 0.014689053874462843, 0.01465678308159113, 0.014713514130562544, 0.014704125002026558, 0.014701786916702986, 0.014673832803964615, 0.01460534194484353, 0.014722773339599371, 0.01467213872820139, 0.014711333904415369, 0.014665342401713133, 0.014657924883067608, 0.01472491305321455, 0.014756245072931051, 0.01462888065725565, 0.014630874153226614, 0.014758483041077852, 0.01465744897723198, 0.014659743756055832, 0.014710995368659496, 0.014713503886014223, 0.0146858268417418, 0.014689034316688776, 0.014665761031210423, 0.0146875218488276, 0.014642145950347185, 0.01466251676902175, 0.014726913999766111, 0.014650528319180012, 0.014635492116212845, 0.01472216984257102, 0.014617578126490116, 0.015092216897755861, 0.014661266002804041, 0.014701765961945057, 0.01462892396375537, 0.014663860201835632, 0.014642343856394291, 0.01466930890455842, 0.014677568804472685, 0.014666886068880558, 0.01472037099301815, 0.01470861816778779, 0.014648966025561094, 0.014719643164426088, 0.014681430999189615, 0.014639905653893948, 0.014667755924165249, 0.01484370231628418, 0.014674000907689333, 0.014707140158861876, 0.014648266602307558, 0.014664050191640854, 0.014668256975710392, 0.014766901265829802, 0.014708842616528273, 0.014642990194261074, 0.014718256890773773, 0.014644715934991837, 0.014661268331110477, 0.014642627909779549, 0.014822571072727442, 0.014669730793684721, 0.014699595980346203, 0.014670358039438725, 0.01476634992286563, 0.014688170980662107, 0.01467848103493452, 0.014697892125695944, 0.01466964092105627, 0.014714428223669529, 0.014601691626012325, 0.014738779980689287, 0.014688229188323021, 0.014721358194947243, 0.014753606636077166, 0.014656157232820988, 0.014895821921527386, 0.014720218256115913, 0.014707838650792837, 0.014611959923058748, 0.014684588182717562, 0.01467736391350627, 0.014724869281053543, 0.014695005025714636, 0.014731600880622864, 0.01461183512583375, 0.014731867704540491, 0.014806079212576151, 0.01464891992509365, 0.01464155176654458, 0.014742294326424599, 0.014650501776486635, 0.01463365089148283, 0.014783077407628298, 0.014656313695013523, 0.014646334107965231, 0.014736982993781567, 0.014697804115712643, 0.014871521852910519], tpot=0.0, prompt_len=256, error='')
Initial test run completed. Starting main benchmark run...
Traffic request rate: 40.0
Burstiness factor: 1.0 (Poisson process)
Maximum request concurrency: None
============ Serving Benchmark Result ============
Successful requests:                     1024      
Benchmark duration (s):                  47.73     
Total input tokens:                      262144    
Total generated tokens:                  240538    
Request throughput (req/s):              21.45     
Output token throughput (tok/s):         5039.04   
Total Token throughput (tok/s):          10530.71  
---------------Time to First Token----------------
Mean TTFT (ms):                          4202.82   
Median TTFT (ms):                        478.85    
P99 TTFT (ms):                           9614.05   
-----Time per Output Token (excl. 1st token)------
Mean TPOT (ms):                          80.11     
Median TPOT (ms):                        86.61     
P99 TPOT (ms):                           115.40    
---------------Inter-token Latency----------------
Mean ITL (ms):                           79.04     
Median ITL (ms):                         54.17     
P99 ITL (ms):                            195.91    
==================================================
