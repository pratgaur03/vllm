INFO 07-07 18:02:49 [__init__.py:239] Automatically detected platform rocm.
Namespace(backend='openai-chat', base_url=None, host='localhost', port=8080, endpoint='/v1/chat/completions', dataset_name='random', dataset_path=None, max_concurrency=None, model='/workspace/llama_3.1_70B', tokenizer=None, use_beam_search=False, num_prompts=100, logprobs=None, request_rate=50.0, burstiness=1.0, seed=0, trust_remote_code=False, disable_tqdm=False, profile=False, save_result=True, save_detailed=False, metadata=None, result_dir='./results', result_filename='chunked_prefill-qps-50-input-len-1024-tp-1.json', ignore_eos=False, percentile_metrics='ttft,tpot,itl', metric_percentiles='99', goodput=None, sonnet_input_len=550, sonnet_output_len=150, sonnet_prefix_len=200, sharegpt_output_len=None, random_input_len=1024, random_output_len=256, random_range_ratio=1.0, random_prefix_len=0, hf_subset=None, hf_split=None, hf_output_len=None, tokenizer_mode='auto', served_model_name=None, lora_modules=None)
Starting initial single prompt test run...
=== DEBUG: Entering benchmark() ===
DEBUG: backend         = openai-chat
DEBUG: api_url         = 'http://localhost:8080/v1/chat/completions'
DEBUG: model_id        = '/workspace/llama_3.1_70B'
DEBUG: model_name      = None
DEBUG: request_func    = async_request_openai_chat_completions
Starting initial single prompt test run...
test_output RequestFuncOutput(generated_text='It appears that you\'ve provided a large block of text that seems to be a mix of code snippets, error messages, and random text. I\'ll try to break it down and provide some insights.\n\n**Code snippets:**\n\nThe text contains snippets of code in various programming languages, including:\n\n1. Java: There are several Java code snippets, including Android-related code, Java Servlet code, and JavaFX code.\n2. Python: There are a few Python code snippets, including some related to machine learning and data science.\n3. C#: There are some C# code snippets, including some related to ASP.NET and Windows Forms.\n4. JavaScript: There are a few JavaScript code snippets, including some related to React and Angular.\n\n**Error messages:**\n\nThe text also contains several error messages, including:\n\n1. Java errors: There are several Java error messages, including "java.lang.NullPointerException" and "java.lang.ClassNotFoundException".\n2. Python errors: There are a few Python error messages, including "SyntaxError" and "ImportError".\n3. C# errors: There are some C# error messages, including "System.NullReferenceException" and "System.TypeLoadException".\n\n**Random text:**\n\nThe text also contains a significant amount of random text, including', success=True, latency=7.139048597309738, output_tokens=256, ttft=0.2158980411477387, itl=[3.2986048609018326e-05, 0.026142769027501345, 0.02710995776578784, 0.02694844128564, 0.027010386809706688, 0.027045272290706635, 0.02713423501700163, 0.027022517751902342, 0.02710121078416705, 0.026980118360370398, 0.02708489168435335, 0.02707116911187768, 0.027148855850100517, 0.026991020422428846, 0.027152159716933966, 0.027105864137411118, 0.027114497032016516, 0.026927209924906492, 0.027055989019572735, 0.02702590310946107, 0.027051467914134264, 0.027070996817201376, 0.02707726927474141, 0.027075254824012518, 0.027122674975544214, 0.02702270122244954, 0.02708442695438862, 0.027021053712815046, 0.027184163220226765, 0.027058320119976997, 0.027135530952364206, 0.02708835108205676, 0.027042829897254705, 0.02700174693018198, 0.02715895790606737, 0.027069134172052145, 0.027128442656248808, 0.027037101332098246, 0.027210401836782694, 0.027121865190565586, 0.02715941285714507, 0.027095214929431677, 0.02724422188475728, 0.02712880400940776, 0.02714137639850378, 0.027118850965052843, 0.027114737778902054, 0.02710019424557686, 0.02717321366071701, 0.0272226519882679, 0.027188314124941826, 0.027123793959617615, 0.02720561297610402, 0.027128253132104874, 0.027187088038772345, 0.027155020739883184, 0.027183985337615013, 0.0270181349478662, 0.027177936863154173, 0.027102832216769457, 0.02728190878406167, 0.02721288101747632, 0.02729906514286995, 0.027112113777548075, 0.027144575025886297, 0.027075924910604954, 0.027174520306289196, 0.027007256634533405, 0.027252948377281427, 0.026858845725655556, 0.027108953334391117, 0.027051483746618032, 0.027160886209458113, 0.027138002682477236, 0.027178439311683178, 0.027063257060945034, 0.02718997560441494, 0.027175899129360914, 0.027187244966626167, 0.02700606407597661, 0.027132824063301086, 0.026979939080774784, 0.027116097044199705, 0.027016631793230772, 0.027166054118424654, 0.027024212758988142, 0.02707318915054202, 0.027125002816319466, 0.027050426229834557, 0.027025842107832432, 0.027157422620803118, 0.02703859331086278, 0.02705817809328437, 0.02721467101946473, 0.027194628957659006, 0.027169028762727976, 0.027103504166007042, 0.027116467710584402, 0.027109448332339525, 0.02710556471720338, 0.02726002410054207, 0.026968094985932112, 0.02714001713320613, 0.027085896115750074, 0.027234746608883142, 0.027037182357162237, 0.027174887713044882, 0.02704376634210348, 0.027158448938280344, 0.027092962991446257, 0.027126279659569263, 0.02710274700075388, 0.02729691518470645, 0.026977023109793663, 0.027260650880634785, 0.027092458214610815, 0.027224727906286716, 0.02711892407387495, 0.02716946369037032, 0.02706099534407258, 0.027125194668769836, 0.027049026917666197, 0.027151258196681738, 0.02714192820712924, 0.027146842796355486, 0.02709820820018649, 0.027312106918543577, 0.02713832911103964, 0.027179754804819822, 0.027089841198176146, 0.027230714913457632, 0.027063512708991766, 0.027240732219070196, 0.027135477866977453, 0.02711419528350234, 0.027330024633556604, 0.027178426273167133, 0.02701228391379118, 0.027141614817082882, 0.027120175305753946, 0.027249191887676716, 0.02709353994578123, 0.027189364191144705, 0.0270865298807621, 0.027325667906552553, 0.027158721815794706, 0.02724495017901063, 0.02716614305973053, 0.02726146997883916, 0.0271679381839931, 0.027188997715711594, 0.027115941047668457, 0.027166094165295362, 0.027207147795706987, 0.02724346425384283, 0.02705857763066888, 0.02721620397642255, 0.02718436298891902, 0.027217998169362545, 0.02721131406724453, 0.027167499996721745, 0.027136178221553564, 0.027163555845618248, 0.027245378121733665, 0.02722408203408122, 0.027342885732650757, 0.02712696697562933, 0.02718879096210003, 0.027142320293933153, 0.02723715268075466, 0.027228219900280237, 0.027156247291713953, 0.02720353612676263, 0.02720596268773079, 0.027157505974173546, 0.027206423226743937, 0.027150432113558054, 0.02713435096666217, 0.027154484763741493, 0.027278962079435587, 0.027204188983887434, 0.02710521686822176, 0.027195028960704803, 0.027179350145161152, 0.027175404131412506, 0.0270549519918859, 0.02719292975962162, 0.027054206933826208, 0.027163855265825987, 0.027245986741036177, 0.027186379302293062, 0.0271318256855011, 0.02728369738906622, 0.02709257695823908, 0.02718022372573614, 0.027123602107167244, 0.027213788125663996, 0.027193938847631216, 0.027269097045063972, 0.02764283725991845, 0.027054528705775738, 0.02719069505110383, 0.02724606916308403, 0.027149531058967113, 0.027306134812533855, 0.027137973811477423, 0.027257013134658337, 0.027063636109232903, 0.027200262993574142, 0.027132832910865545, 0.027314477134495974, 0.02724803565070033, 0.027271271217614412, 0.027096556965261698, 0.02724719187244773, 0.02708135638386011, 0.027144263964146376, 0.02709526475518942, 0.027152898255735636, 0.02739677671343088, 0.027149740140885115, 0.027080487925559282, 0.027300451882183552, 0.027166872285306454, 0.027211959939450026, 0.027146731037646532, 0.02717838389798999, 0.027132867835462093, 0.027276018168777227, 0.027140424121171236, 0.027294037863612175, 0.027133538853377104, 0.027244550175964832, 0.027239330112934113, 0.027181495912373066, 0.027133556082844734, 0.027285780757665634, 0.02720259316265583, 0.027271916158497334, 0.027224022895097733, 0.02730559976771474, 0.027193277142941952, 0.027226088102906942, 0.027223522774875164, 0.027207375038415194, 0.027129000052809715, 0.02736324118450284, 0.027169056702405214, 0.027284331154078245, 0.027163251768797636, 0.027209807187318802, 0.027094513177871704, 0.02737435605376959, 0.027038289699703455, 0.02720485022291541, 0.027453366667032242], tpot=0.0, prompt_len=1024, error='')
Initial test run completed. Starting main benchmark run...
Traffic request rate: 50.0
Burstiness factor: 1.0 (Poisson process)
Maximum request concurrency: None
============ Serving Benchmark Result ============
Successful requests:                     100       
Benchmark duration (s):                  19.75     
Total input tokens:                      102400    
Total generated tokens:                  22112     
Request throughput (req/s):              5.06      
Output token throughput (tok/s):         1119.76   
Total Token throughput (tok/s):          6305.35   
---------------Time to First Token----------------
Mean TTFT (ms):                          4331.07   
Median TTFT (ms):                        4353.52   
P99 TTFT (ms):                           8299.92   
-----Time per Output Token (excl. 1st token)------
Mean TPOT (ms):                          68.87     
Median TPOT (ms):                        58.06     
P99 TPOT (ms):                           317.52    
---------------Inter-token Latency----------------
Mean ITL (ms):                           55.83     
Median ITL (ms):                         36.92     
P99 ITL (ms):                            398.27    
==================================================
